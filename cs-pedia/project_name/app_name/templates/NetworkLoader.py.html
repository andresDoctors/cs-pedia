<!-- HTML generated using hilite.me -->
<div style="overflow-y:auto;height:440px;background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">from</span> <span style="color: #f8f8f2">FlowNetwork</span> <span style="color: #66d9ef">import</span> <span style="color: #f8f8f2">FlowNetwork</span>


    <span style="color: #75715e"># acceptable_chars == </span>
    <span style="color: #75715e">#   set(string.printable)</span>
    <span style="color: #75715e">#     .difference({&#39;\r&#39;, &#39;\v&#39;, &#39;\f&#39;})</span>
    <span style="color: #75715e">#     .add({&#39;ñ&#39;, &#39;Ñ&#39;})</span>
    
    <span style="color: #f8f8f2">acceptable_chars</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #75715e">#numbers</span>
        <span style="color: #e6db74">&#39;0&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;1&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;2&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;3&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;4&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;5&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;6&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;7&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;8&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;9&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #75715e">#letters</span>
        <span style="color: #e6db74">&#39;a&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;b&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;c&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;d&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;e&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;f&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;g&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;h&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;i&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;j&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;k&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;l&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;m&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;n&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;ñ&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&#39;o&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;p&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;q&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;r&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;s&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;t&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;u&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;v&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;w&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;x&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;y&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;z&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&#39;A&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;B&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;C&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;D&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;E&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;F&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;G&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;H&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;I&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;J&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;K&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;L&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;M&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;N&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;Ñ&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&#39;O&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;P&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;Q&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;R&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;S&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;T&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;U&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;V&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;W&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;X&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;Y&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;Z&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #75715e">#symbols</span>
        <span style="color: #e6db74">&#39;!&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&quot;&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;#&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;$&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;%&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&amp;&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;&#39;&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;(&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;)&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;*&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;+&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;,&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;-&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;.&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;/&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&#39;:&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;;&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&lt;&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;=&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&gt;&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;?&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;@&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;[&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;</span><span style="color: #ae81ff">\\</span><span style="color: #e6db74">&#39;</span><span style="color: #f8f8f2">,</span><span style="color: #e6db74">&#39;]&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;^&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;_&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;`&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;{&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;|&#39;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&#39;}&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;~&#39;</span><span style="color: #f8f8f2">,</span> 
        <span style="color: #75715e">#invisible</span>
        <span style="color: #e6db74">&#39; &#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;</span><span style="color: #ae81ff">\t</span><span style="color: #e6db74">&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;</span><span style="color: #ae81ff">\n</span><span style="color: #e6db74">&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">}</span>
    
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">load_network</span><span style="color: #f8f8f2">(path):</span>
        <span style="color: #f8f8f2">nw</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">FlowNetwork()</span>
    
        <span style="color: #66d9ef">with</span> <span style="color: #f8f8f2">open(path,</span> <span style="color: #e6db74">&#39;r&#39;</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">as</span> <span style="color: #f8f8f2">file:</span>
            <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">line</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">file:</span>
    
                <span style="color: #f8f8f2">sanitized</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">join(filter(</span><span style="color: #66d9ef">lambda</span> <span style="color: #f8f8f2">c:</span> <span style="color: #f8f8f2">c</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">acceptable_chars,</span> <span style="color: #f8f8f2">line))</span>
                <span style="color: #f8f8f2">words</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">sanitized</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">split()</span>
                <span style="color: #66d9ef">if</span><span style="color: #f8f8f2">(len(words)</span> <span style="color: #f92672">==</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">):</span> <span style="color: #66d9ef">continue</span>
    
                <span style="color: #66d9ef">assert</span><span style="color: #f8f8f2">(words[</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">in</span> <span style="color: #e6db74">&#39;cpna&#39;</span><span style="color: #f8f8f2">)</span>
                <span style="color: #f8f8f2">w0,</span> <span style="color: #f8f8f2">w1,</span> <span style="color: #f8f8f2">w2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">words[</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">],</span> <span style="color: #f8f8f2">words[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">],</span> <span style="color: #f8f8f2">words[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">]</span>
    
                <span style="color: #66d9ef">if</span>  <span style="color: #f8f8f2">(w0</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&#39;c&#39;</span> <span style="color: #f92672">or</span> <span style="color: #f8f8f2">w0</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&#39;p&#39;</span><span style="color: #f8f8f2">):</span> <span style="color: #66d9ef">continue</span>
                <span style="color: #66d9ef">elif</span><span style="color: #f8f8f2">(w0</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&#39;n&#39;</span><span style="color: #f8f8f2">):</span> <span style="color: #f8f8f2">nw</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set_st(w1,</span> <span style="color: #f8f8f2">w2)</span>
                <span style="color: #66d9ef">elif</span><span style="color: #f8f8f2">(w0</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&#39;a&#39;</span><span style="color: #f8f8f2">):</span> <span style="color: #f8f8f2">nw</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">add_arc(w1,</span> <span style="color: #f8f8f2">w2,</span> <span style="color: #f8f8f2">int(words[</span><span style="color: #ae81ff">3</span><span style="color: #f8f8f2">]))</span>
    
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">nw</span>
    </pre></div>
    